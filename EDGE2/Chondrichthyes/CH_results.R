##### In this run we are going to read in the 100 results files generated by the HPC run 
# we are going to look at all the resultant PD losses and and create a 'master' edge scores data-frame

# Housekeeping
rm(list=ls())
graphics.off()
setwd("~/Documents/EDGE2/Chondrichthyes/")


# first things first: packages

library(ape)
library(caper)
library(data.table)
require(geiger)
require(pez)
require(phytools)
require(phylobase)

## now lets IMPORT THOSE DATAAAAAAAAAAAAA
### set up the storage devices

f.EDGE.2.list <- list()
f.exp.PD.list <- list()
f.exp.PD.trees <- list()

for (i in 1:1000) {
  EDGE.2.list <- NA
  exp.PD.list <- NA
  exp.PD.trees <- NA
  to.load <- paste("Ch_EDGE2_run", i, ".Rdata", sep = "")
  try(load(file = to.load), silent = F) # called res
  f.EDGE.2.list[[i]] <- EDGE.2.list[[1]]
  f.exp.PD.list[[i]] <- exp.PD.list[[1]]
  f.exp.PD.trees[[i]] <- exp.PD.trees[[1]]
  print(i)
}


# rename

EDGE.2.list <- f.EDGE.2.list
exp.PD.list <- f.exp.PD.list
exp.PD.trees <- f.exp.PD.trees


#### save these down 

save(EDGE.2.list, exp.PD.list, exp.PD.trees, file = "Results/Ch_HPCResults.Rdata")

